---
title: "Lab 1"
author: Karisa Kopecek
date: today
format:
  html:
    theme: sketchy
    embed-resources: true
    echo: true
---

# Task 1

## Question 1

**Identify, and list here, what aesthetics are being used and which variables are being mapped to each aesthetic.**

**Aesthetics and Variable Mappings:**

-   **x-position**: Income (GDP per capita) on horizontal axis

-   **y-position**: Life expectancy on vertical axis

-   **size**: larger circles represent countries with larger populations (see lower right corner)

-   **color**: different colors represent different geographical regions (see upper right and legend)

-   **scale:**

    -   **scale_x_log10**: potential scale transformation for income axis (500 etc)

    -   **scale_y_continuous**: scale for life expectancy (20-90 years)

**labels/text**, **fill**,**alpha/transparency**, **there could also be legend, background and other aesthetics relating to the interactive elements but I listed the main ones above \^ especially as it relates to what has been covered in class**

Overall, the plot shows the relationship between income and life expectancy across different countries, with bubble size indicating population and color indicating regional grouping.

## Question 2

**Import the q1data.csv dataset.**

```{python}
#| code-fold: true

import pandas as pd

data_dir = "Data/q1data.csv"  
q1_data = pd.read_csv(data_dir)
q1_data.head() #making sure code shows up
```

## Question 3

**Recreate the plot as best you can using plotnine**

```{python}
#| code-fold: true

from plotnine import *

plot = (ggplot(q1_data, aes(x="income", y="life_exp", color="four_regions", size="population")) +
        geom_point(alpha=0.5) +
        scale_x_continuous(
            trans="log2", #as shown in class both the breaks and log base 2
            breaks=[500, 1000, 2000, 4000, 8000, 16000, 32000, 64000],
            labels=["500", "1000", "2000", "4000", "8000", "16k", "32k", "64k"],
            limits=[400, 80000] #needed these limits to avoid error message about lengths being different
        ) +
        scale_y_continuous(
            breaks=[20, 30, 40, 50, 60, 70, 80, 90],
            limits=[20, 90]
        ) +
        labs(x="Income Level (GDP/capita, PPPS inflation-adjusted)", 
             y="Life expectancy (years)", 
             color="World Regions", 
             size="Population", 
             title="2010 Income Vs. Life Expectancy") +
        theme_minimal())

plot
```



## Question 4

**What other geometries could you use here besides geom_point? Provide an actual plot of another geometry being used here and why it’s good or bad for visualizing these data**

```{python}
#| code-fold: true

plot2 = (ggplot(q1_data, aes(x="income", y="life_exp", color="four_regions")) +
         geom_line() +
         scale_x_log10() +
         labs(title="geom_line (bad)", x="Income", y="Life expectancy") +
         theme_minimal())

plot2
```

Even though someone might think to use geom_line because the data is continous, geom_line is a bad choice because geom_line connects countries together creating different lines that don't show a clear relationship. Even though lines are between each country, there isn't a logical sequence between points (like tracking one country over time). Each country in this dataset is an independent observation, so connecting them with lines just creates chaos. geom_point works better because it shows each country as a separate data point without implying more of a connection between them (realistically the only connection is the continent of the country and that should be reflected in the data).

# Task 2

## Question 1

**Identify, and list here, what aesthetics are being used and which variables are being mapped to each aesthetic.**

**Aesthetics and Variable Mappings:**

-   **x-position:** Exports (% of GDP) on horizontal axis

-   **y-position:** Imports (% of GDP) on vertical axis

-   **size:** larger circles represent countries with larger energy use (see lower right corner)

-   **color:** different colors represent different geographical regions (see upper right and legend)

-   **scale:**

    -   **scale_x_continuous:** scale for exports axis (0-220% etc)

    -   **scale_y_continuous:** scale for imports axis (0-40% etc)

**labels/text**, **fill**, **alpha/transparency**, **there could also be legend, background and other aesthetics relating to the interactive elements but I listed the main ones above \^ especially as it relates to what has been covered in class**

Overall, the plot shows the relationship between a country's imports and exports as percentages of GDP, with bubble size indicating energy use and color indicating regional grouping.

## Question 2

**Import the q2data.csv dataset.**

```{python}
#| code-fold: true

import pandas as pd

data_dir = "Data/q2data.csv"  
q2_data = pd.read_csv(data_dir)
q2_data.head() #making sure code shows up
```

## Question 3

**Recreate the plot as best you can using plotnine**

```{python}
#| code-fold: true

#filter out rows with missing data for the variables we need
q2_data_clean = q2_data.dropna(subset=['exports', 'imports', 'energy', 'four_regions'])

#converting energy to numeric to fix the map
q2_data_clean['energy'] = pd.to_numeric(q2_data_clean['energy'], errors='coerce')

plot3 = (ggplot(q2_data_clean, aes(x="exports", y="imports", color="four_regions", size="energy")) +
        geom_point(alpha=0.7) + #making points transparent
        scale_x_continuous(
            breaks=[20, 40, 60, 80, 100, 120, 140, 160, 180, 200, 220],
            limits=[0, 220] #added to fix axis getting cut off at 160
        ) +
        scale_y_continuous(
            breaks=[50, 100, 150, 200, 250, 300, 350, 400],
            limits=[0, 400]
        ) +
        labs(x="Exports (% of GDP)", y="Imports (% of GDP)", color="World Regions", size="Energy use", title="1997 Imports vs Exports") + #fixing labels
        theme_minimal())
plot3
```

## Question 4

**What other geometries could you use here besides geom_point? Provide an actual plot of another geometry being used here and why it’s good or bad for visualizing these data**

```{python}
#| code-fold: true

plot4 = (ggplot(q2_data_clean, aes(x='exports', y='imports', color='four_regions')) +
              geom_smooth(method='lm', se=True, alpha=0.1) +
              labs(title='Trade Relationship with Trend Lines by Region 1997',
                   x='Exports (% of GDP)',
                   y='Imports (% of GDP)',
                   color='four_regions') +
              theme_minimal())

plot4
```

Even though someone might think to use geom_smooth because it shows the relationship between imports and exports and works with two continuous variables, it's actually a bad choice for this data because it hides all the individual countries. The smooth lines make it seem like there's a perfect linear relationshipin the data, but that's not true since different countries have totally different economies. Plus, you completely lose the energy use information since you can't show the size of points with smooth lines (I could add geom_point to this to be able to do that, but it could be confusing with all the lines already squished). geom_point is better because you aren't showing an oversimplified trend.

# Task 3

## Question 1

**Identify, and list here, what aesthetics are being used and which variables are being mapped to each aesthetic.**

-   Aesthetics and Variable Mappings:

-   **x-position**: Individuals using the Internet (%) on horizontal axis

-   **y-position:** GDP/capita (\$) on vertical axis

-   **size:** larger circles represent countries with larger income (see lower right corner)

-   **color**: different colors represent different geographical regions (see upper right and legend)

-   **scale:**

    -   **scale_x_continuous:** scale for internet usage axis (10 etc)

    -   **scale_y_log2:** log scale transformation for GDP/capita axis (200-100k etc)

**labels/text**, **fill**, **alpha/transparency**, **there could also be legend, background and other aesthetics relating to the interactive elements but I listed the main ones above \^ especially as it relates to what has been covered in class**

Overall, the plot shows the relationship between internet usage and GDP per capita across different countries, with bubble size indicating income level and color indicating regional grouping.

## Question 2

**Import the q1data.csv dataset.**

```{python}
#| code-fold: true

data_dir = "Data/q3data.csv"  
q3_data = pd.read_csv(data_dir)
q3_data.head() #making sure code shows up
```

## Question 3

**Recreate the plot as best you can using plotnine**

```{python}
#| code-fold: true

plot5 = (ggplot(q3_data, aes(x="internet_users", y="gdp", color="four_regions", size="income")) +
        geom_point(alpha=0.7) + #making points transparent
        scale_x_continuous(
            breaks=[0, 10, 20, 30, 40, 50, 60, 70, 80, 90],
            limits=[0, 90]
        ) +
        scale_y_continuous(
            trans="log2",
            breaks=[200, 500, 1000, 2000, 5000, 10000, 20000, 50000, 100000],
            labels=["200", "500", "1k", "2k", "5k", "10k", "20k", "50k", "100k"],
            limits=[200, 100000]
        ) +
        labs(x="Individuals using the Internet (%)", y="GDP/capita ($)", color="World Regions", size="Income", title="2001 Internet Usage vs GDP per Capita") + #fixing labels
        theme_minimal())
plot5
```

## Question 4

**What other geometries could you use here besides geom_point? Provide an actual plot of another geometry being used here and why it’s good or bad for visualizing these data**


```{python}
#| code-fold: true

plot6_smooth = (ggplot(q3_data, aes(x='internet_users', y='gdp')) +
               geom_smooth(method='lm', alpha=0.7) +
               scale_y_log10() +
               labs(title="geom_smooth - Internet Usage vs GDP", 
                    x="Individuals using the Internet (%)", 
                    y="GDP per Capita (log scale)") +
               theme_minimal())

plot6_smooth
```

Even though someone might think to use geom_smooth because it shows the relationship between internet usage and GDPand works with two continuous variables, it's actually a bad choice because the y is on a log scale not a linear one and there are different clusters that can't be seen on this graph. The black line makes you focus on a linear trend instead of seeing patterns like how European countries cluster differently from other countries. The line just shows "higher internet usage correlates with higher GDP", geom_point is better because it shows the complexity of the graph.

